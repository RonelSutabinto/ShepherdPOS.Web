@*==============================================================================================================
===The concept for the code of thumbnail table display that used html and IEnumerable Linq database==============
===context products records query comes from the notion of asp.net core Blazor of add to cart pos================
===For more details, try this linkhttps://www.youtube.com/watch?v=sHuuo9L3e5c.===============================
==============================================================================================================*@

<div class="row justify-content-end">
    <div class="col-8 mb-3  ">
        <input type="text" class="form-control" placeholder="Search by Product Name or Barcode" @bind:event="oninput">
    </div>
</div>
<div class="card" style="height: 700px; overflow-y: scroll;">
    <div class="card-body">

        <div class="row row-cols-1 row-cols-md-3 g-4">
            @foreach (var product in Products)
            {
                <div class="col">

                    <div class="card">
                        <img class="img-thumbnail" src="@product.ImageURL">
                        <div class="card-body">

                            <MudText Typo="Typo.subtitle1" Class="card-title">
                                @product.ProductName
                            </MudText>

                            <p class="card-text">
                                <b>@product.SalePrice.ToString("C")</b>
                            </p>
                            <div>
                                <button type="button" @onclick="() => SelectProduct(product)" class="btn btn-link">
                                    Add Item
                                </button>
                            </div>
                        </div>
                    </div>

                </div>
            }
        </div>
    </div>
</div>

@code {

    [Parameter] public SelectProductView[]? Products { get; set; }
    SelectProductView[]? filteredProducts = null;
    [Parameter] public EventCallback<SelectProductView> OnProductSelect { get; set; }

    private void SelectProductByNameOrByBarcode(string filterName)
    {
        filteredProducts = Products!.Where(p => p.ProductName.Contains(filterName)).ToArray();
    }

    private async Task SelectProduct(SelectProductView product)
    {
        await OnProductSelect.InvokeAsync(product);

    }
}